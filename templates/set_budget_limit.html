{% extends "base.html" %} {% block title %}Set Budget Limit{% endblock %} {%
block content %}
<h1>Set Budget Limit</h1>
<form method="POST" action="{{ url_for('set_budget_limit') }}">
  {{ form.hidden_tag() }}
  <div>
    {{ form.category.label }} {{ form.category(class="form-control") }} {% for
    error in form.category.errors %}
    <span class="error">{{ error }}</span>
    {% endfor %}
  </div>
  <div>
    {{ form.amount.label }} {{ form.amount(class="form-control", type="number",
    step="0.01") }} {% for error in form.amount.errors %}
    <span class="error">{{ error }}</span>
    {% endfor %}
  </div>
  <div>{{ form.submit(class="btn btn-primary") }}</div>
</form>

<h2>Current Budget Limits</h2>
<table class="table">
  <thead>
    <tr>
      <th>Category</th>
      <th>Limit Amount</th>
      <th>Actions</th>
    </tr>
  </thead>
  <tbody>
    {% for limit in budget_limits %}
    <tr>
      <td>{{ limit.category.name }}</td>
      <td>${{ "%.2f"|format(limit.amount) }}</td>
      <td>
        <form
          style="display: inline"
          action="{{ url_for('delete_budget_limit', limit_id=limit.id) }}"
          method="POST"
        >
          <input
            type="submit"
            value="Delete"
            class="btn btn-small btn-danger"
            onclick="return confirm('Are you sure you want to delete this budget limit?');"
          />
        </form>
      </td>
    </tr>
    {% endfor %}
  </tbody>
</table>
{% endblock %}
